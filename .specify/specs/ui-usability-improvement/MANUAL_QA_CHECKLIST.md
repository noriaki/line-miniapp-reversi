# 手動QA検証チェックリスト

**Feature**: UI Usability Improvement
**Task**: Task 9 - 手動QAとLIFF Browser検証
**作成日**: 2025-11-13
**対象要件**: 2.2, 2.3, 2.4, 2.5, 3.1, 5.3

---

## 検証概要

本チェックリストは、UIユーザビリティ改善機能の手動QA検証項目を定義します。すべての自動テスト（Unit, Integration, E2E）が完了した後に実施してください。

---

## 前提条件

### 環境準備

- [ ] ステージング環境にデプロイ済み
- [ ] LINE LIFF URLが発行済み
- [ ] iOS端末（iPhone）にLINEアプリインストール済み
- [ ] Android端末にLINEアプリインストール済み
- [ ] ストップウォッチまたはタイマーアプリ準備済み
- [ ] Chrome DevTools Lighthouse実行可能な環境

### 自動テスト完了確認

- [ ] Jestユニットテスト: 全テスト成功（90%+カバレッジ）
- [ ] Playwright E2Eテスト: 全テスト成功（Desktop + Mobile）
- [ ] クロスブラウザ互換性テスト: 全ブラウザで成功
- [ ] TypeScriptコンパイル: エラーなし
- [ ] ESLint/Prettier: エラーなし

---

## 検証項目

### 1. 棋譜表示の視覚的非表示化

**要件**: Requirement 1.1, 1.2, 1.4

**検証手順**:

1. ステージング環境のゲームページにアクセス
2. ゲームを開始し、最初の一手を打つ
3. 画面全体を目視確認

**期待結果**:

- [ ] 棋譜テキスト（例: "c4f5e3"）が画面に表示されていない
- [ ] 棋譜が視覚的に完全に隠蔽されている
- [ ] ゲーム画面がシンプルでクリーンな見た目

**確認ポイント**:

- 棋譜要素がどこにも見えないこと
- 画面外配置や透明化により隠蔽されていること
- ゲームボードレイアウトに影響がないこと

**合格基準**: 棋譜テキストが視覚的に完全に非表示

---

### 2. メッセージ表示/非表示時のレイアウトシフト防止

**要件**: Requirement 2.4, 2.5

**検証手順**:

1. ゲーム開始時のゲームボード位置を確認
2. パス操作を実行してメッセージを表示
3. メッセージ表示中のゲームボード位置を確認
4. 5秒後にメッセージが消える際のゲームボード位置を確認
5. 複数回パス操作を繰り返して確認

**期待結果**:

- [ ] メッセージ表示時にゲームボードが上下に移動しない
- [ ] メッセージ非表示時にゲームボードが上下に移動しない
- [ ] メッセージ領域の高さが常に固定されている
- [ ] 他のUI要素（石カウンター、プレイヤー情報等）が移動しない

**確認ポイント**:

- ゲームボードのY座標が不変
- メッセージ領域が常に同じ高さ（64px相当）を保持
- ページ全体のスクロール位置が変化しない

**合格基準**: レイアウトシフトが一切発生しない

---

### 3. メッセージ表示時のフェードイン効果

**要件**: Requirement 2.2

**検証手順**:

1. パス操作を実行
2. メッセージが表示される瞬間を観察

**期待結果**:

- [ ] メッセージが滑らかにフェードインする
- [ ] フェード効果が自然で違和感がない
- [ ] 表示アニメーションが約200ms（0.2秒）で完了
- [ ] 突然表示されるのではなく、徐々に現れる

**確認ポイント**:

- opacity が 0 から 100 に滑らかに変化
- transition-opacity による自然なアニメーション
- UX的に心地よい視覚効果

**合格基準**: 滑らかなフェードイン効果が確認できる

---

### 4. メッセージ非表示時のフェードアウト効果

**要件**: Requirement 2.3

**検証手順**:

1. パス操作を実行してメッセージを表示
2. 5秒経過後、メッセージが消える瞬間を観察

**期待結果**:

- [ ] メッセージが滑らかにフェードアウトする
- [ ] フェード効果が自然で違和感がない
- [ ] 非表示アニメーションが約200ms（0.2秒）で完了
- [ ] 突然消えるのではなく、徐々に薄くなる

**確認ポイント**:

- opacity が 100 から 0 に滑らかに変化
- transition-opacity による自然なアニメーション
- UX的に心地よい視覚効果

**合格基準**: 滑らかなフェードアウト効果が確認できる

---

### 5. メッセージ表示時間の計測

**要件**: Requirement 3.1

**検証手順**:

1. ストップウォッチまたはタイマーアプリを準備
2. パス操作を実行
3. メッセージが表示された瞬間にタイマー開始
4. メッセージが消えた瞬間にタイマー停止
5. 表示時間を記録
6. 複数回計測して平均を取る

**期待結果**:

- [ ] メッセージ表示時間が約5秒（5000ms）
- [ ] 誤差が±0.5秒以内
- [ ] 複数回計測しても一貫して5秒前後

**確認ポイント**:

- 3秒ではなく5秒であることを確認
- タイマーが正確に動作していること
- ブラウザによる差異がないこと

**合格基準**: 表示時間が5秒±0.5秒以内

**計測記録**:

| 試行回数 | 表示時間（秒） | 備考 |
| -------- | -------------- | ---- |
| 1        |                |      |
| 2        |                |      |
| 3        |                |      |
| 平均     |                |      |

---

### 6. LINE LIFF Browser (iOS WKWebView) 実機検証

**要件**: Requirement 5.3

**検証環境**:

- デバイス: iPhone（iOS最新版推奨）
- アプリ: LINEアプリ最新版
- ブラウザ: WKWebView（LINEアプリ内ブラウザ）

**検証手順**:

1. iPhone上でLINEアプリを起動
2. LIFF URLをトークまたはKeep経由で開く
3. ゲームを開始
4. 上記検証項目1-5をすべて実施

**期待結果**:

- [ ] 棋譜が視覚的に非表示
- [ ] レイアウトシフトなし
- [ ] フェードイン効果が滑らか
- [ ] フェードアウト効果が滑らか
- [ ] メッセージ表示時間が5秒
- [ ] ゲーム操作が正常に動作
- [ ] タッチ操作がスムーズ

**確認ポイント**:

- WKWebViewでのCSS互換性
- transition-opacityの動作
- 固定高さレイアウトの安定性
- タイマー機能の正確性

**合格基準**: すべての機能がiOS WKWebViewで正常動作

**不具合記録**:

| 項目 | 不具合内容 | 重要度 |
| ---- | ---------- | ------ |
|      |            |        |

---

### 7. LINE LIFF Browser (Android WebView) 実機検証

**要件**: Requirement 5.3

**検証環境**:

- デバイス: Android端末（Android最新版推奨）
- アプリ: LINEアプリ最新版
- ブラウザ: Android WebView（LINEアプリ内ブラウザ）

**検証手順**:

1. Android端末上でLINEアプリを起動
2. LIFF URLをトークまたはKeep経由で開く
3. ゲームを開始
4. 上記検証項目1-5をすべて実施

**期待結果**:

- [ ] 棋譜が視覚的に非表示
- [ ] レイアウトシフトなし
- [ ] フェードイン効果が滑らか
- [ ] フェードアウト効果が滑らか
- [ ] メッセージ表示時間が5秒
- [ ] ゲーム操作が正常に動作
- [ ] タッチ操作がスムーズ

**確認ポイント**:

- Android WebViewでのCSS互換性
- transition-opacityの動作
- 固定高さレイアウトの安定性
- タイマー機能の正確性

**合格基準**: すべての機能がAndroid WebViewで正常動作

**不具合記録**:

| 項目 | 不具合内容 | 重要度 |
| ---- | ---------- | ------ |
|      |            |        |

---

### 8. Chrome DevTools Lighthouse CLS測定

**要件**: Requirement 2.4, 2.5

**検証環境**:

- ブラウザ: Desktop Chrome最新版
- ツール: Chrome DevTools Lighthouse

**検証手順**:

1. ステージング環境をChromeで開く
2. Chrome DevTools を開く (F12)
3. Lighthouseタブを選択
4. カテゴリ: Performance を選択
5. デバイス: Desktop または Mobile を選択
6. "Analyze page load" を実行
7. レポートのCLS（Cumulative Layout Shift）スコアを確認
8. ゲーム中にパス操作を複数回実行
9. 再度Lighthouseを実行してCLSスコアを確認

**期待結果**:

- [ ] CLSスコアが 0.1 以下（Good）
- [ ] 理想的には 0.0 に近い値
- [ ] メッセージ表示/非表示時にスコアが悪化しない
- [ ] 改善前と比較してスコアが向上している

**確認ポイント**:

- CLS = 0.0 が理想（完全にレイアウトシフトなし）
- 0.1以下であれば合格基準
- メッセージ表示がCLSに影響しないこと

**合格基準**: CLSスコア 0.1 以下

**測定記録**:

| デバイス | 初回ロード CLS | ゲーム中 CLS | 備考 |
| -------- | -------------- | ------------ | ---- |
| Desktop  |                |              |      |
| Mobile   |                |              |      |

**改善前後比較**（参考）:

| タイミング | CLSスコア | 備考           |
| ---------- | --------- | -------------- |
| 改善前     |           | (記録があれば) |
| 改善後     |           |                |

---

## 総合評価

### すべての検証項目チェック

- [ ] 1. 棋譜表示の視覚的非表示化
- [ ] 2. レイアウトシフト防止
- [ ] 3. フェードイン効果
- [ ] 4. フェードアウト効果
- [ ] 5. メッセージ表示時間（5秒）
- [ ] 6. iOS WKWebView検証
- [ ] 7. Android WebView検証
- [ ] 8. Lighthouse CLS測定

### 不具合の重要度判定

**Critical（致命的）**: 機能が動作しない、UXが著しく損なわれる

- 不具合数: \_\_\_件

**High（重要）**: 機能は動作するが、要件を満たさない

- 不具合数: \_\_\_件

**Medium（中程度）**: 軽微な問題、UXへの影響は限定的

- 不具合数: \_\_\_件

**Low（軽微）**: 見た目の微調整、オプショナルな改善

- 不具合数: \_\_\_件

### 最終判定

- [ ] **合格**: すべての検証項目が期待結果を満たし、Critical/High不具合なし
- [ ] **条件付き合格**: Medium以下の不具合のみ、本番リリース可能
- [ ] **不合格**: Critical/High不具合あり、修正後に再検証必要

---

## 検証実施記録

**検証実施者**: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
**検証実施日**: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
**検証環境**: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
**検証時間**: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**総合コメント**:

```
[検証結果の総括、所感、改善提案などを記述]
```

---

## 次のアクション

### 合格の場合

- [ ] 本番環境へのデプロイ承認
- [ ] リリースノート作成
- [ ] ステークホルダーへの報告

### 不合格の場合

- [ ] 不具合チケット作成
- [ ] 修正対応の優先順位決定
- [ ] 修正後の再検証スケジュール決定

---

**参考ドキュメント**:

- Requirements: `.kiro/specs/ui-usability-improvement/requirements.md`
- Design: `.kiro/specs/ui-usability-improvement/design.md`
- Tasks: `.kiro/specs/ui-usability-improvement/tasks.md`
- Cross-Browser Verification: `.kiro/specs/ui-usability-improvement/CROSS_BROWSER_VERIFICATION.md`

---

**作成者**: AI-DLC Agent (spec-tdd-impl)
**最終更新**: 2025-11-13
